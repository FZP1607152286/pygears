
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>RISC-V Blog Series Introduction &#8212; PyGears</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RISC-V Tools Setup" href="setup.html" />
    <link rel="prev" title="PyGears 0.1.1" href="../release/v0.1.1.html" />
  
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
  <link rel="alternate" type="application/atom+xml"  href="../blog/atom.xml" title="PyGears">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="risc-v-blog-series-introduction">
<h1>RISC-V Blog Series Introduction<a class="headerlink" href="#risc-v-blog-series-introduction" title="Permalink to this headline">¶</a></h1>

<script>
 function changeVerbosity(verbosity) {

     document.getElementById("verbosity_value").value = verbosity;
     document.getElementById("verbosity_slider").value = verbosity;

     var a = document.querySelectorAll('[data-verbosity]');

     for (var i in a) if (a.hasOwnProperty(i)) {
         if (a[i].getAttribute('data-verbosity') <= verbosity) {
             a[i].removeAttribute("hidden")
         } else {
             a[i].setAttribute("hidden", "true")
         }
     }
 }
</script>

<form class="slidecontainer">
    <b>Slide to adjust verbosity level&ensp;</b>
    <input type="range" min="1" max="2" value="1" name="verbositySlider" id="verbosity_slider" onchange="changeVerbosity(this.value);">
    &ensp;
    <input type="number" maxlength="1" id="verbosity_value" min="1" max="2" value="1" oninput="changeVerbosity(this.value);" style="font-weight: bold"/>
</form>
<p>Welcome to the blog series in which I will be implementing the <a class="reference external" href="https://riscv.org/risc-v-isa/">RISC-V ISA</a> (instruction set) using PyGears. My aim is to show how PyGears offers a way to build hardware in an incremental, evolutionary fashion, where the architecture, implementation and the verification environment evolve together. This aligns with the <a class="reference external" href="https://en.wikipedia.org/wiki/Agile_software_development">agile</a> software philosophy, and offers many benefits to the hardware design process:</p>
<ul class="simple">
<li><p>I don’t need to take into the account all the requirements from the start in order to design the architecture before I start the implementation. <span data-verbosity="2" hidden="true"> This means that I will sooner start the implementation and have feedback about my architectural choices and thus avoid catching architectural errors late, which are then most expensive to fix.</span></p></li>
<li><p>I can get an <a class="reference external" href="https://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a> (Minimum Viable Product) early, which means that I can start <a class="reference external" href="http://softwaretestingfundamentals.com/system-testing/">system testing</a> early and try to catch errors in the design’s <a class="reference external" href="https://en.wikipedia.org/wiki/Functional_requirement">functional requirements</a> as early as possible.</p></li>
<li><p>I can maintain my MVP, so that the customer can try to use the hardware at different stages throughout the development. <span data-verbosity="2" hidden="true"> This offers him a chance to shorten the time-to-market and may provide me with the valuable feedback. This can again lead to the change to the requirements which I would like to have as early as possible.</span></p></li>
</ul>
<p>“Hardware” and “requirements change” are two things that were not meant to go together, but the electronics industry is developing at an ever accelerating pace so this needs to change. <span data-verbosity="2" hidden="true"> This is also recognized by the very authors of the RISC-V ISA, and summed up in their paper </span><a class="reference external" data-verbosity="2" hidden="true" href="https://people.eecs.berkeley.edu/~bora/Journals/2016/IEEEMicro16.pdf">AN AGILE APPROACH TO BUILDING RISC-V MICROPROCESSORS</a><span data-verbosity="2" hidden="true">.</span></p>
<p data-verbosity="2" hidden="true"> Traditional Hals are ill-suited for building larger hardware systems, because they offer very small number of abstraction tools, besides grouping the implementation into modules. Modules are furthermore quite often formed in the wrong way, by grouping various functions together because they operates on the same data, even though they serve different purposes. Think big clunky state machines with many outputs which are usually the major source of bugs and a major obstacle for adding new features. Each of these outputs is probably computed by a functionality that deserves its own module, its own little abstraction. Why are they than being sucked into state machine module monsters? Usually because we either believe that it leads to a more optimized design, or we afraid of synchronization issues. But wire is a wire even if it leaves the module boundaries, and decent hardware synthesis tools offer inter-module optimization, so we lose next to nothing by factoring out the functionality. As for the synchronization, putting everything in a single module just offers a false sense of security and sweeps the problem under the rug until later when functionality piles up inside the module and pipelining becomes a nightmare, not to mention dealing with synchronization issues between such complex modules.</p>
<p><span> Since the biggest issue with maintaining a large hardware design is synchronization (as with any other massively parallel system), PyGears tries to face it upfront by forcing each module to implement a </span><a class="reference external" href="https://bogdanvuk.github.io/pygears/gears.html#one-interface">flow-controlled interface</a><span>, which turns modules into “gears” in PyGears terminology. </span><span data-verbosity="2" hidden="true"> As much as it may seem as an overkill in the beginning, it usually pays-off later, and is easily optimized-away by the hardware synthesis tools if not really needed. </span><span> Gears are not grouped around the state, but are formed to group and abstract some functionality, while the state is encoded in the data sent between the gears. This further alleviates the synchronization problem, as I intend to show while implementing RISC-V ISA.</span></p>
<p>Usually the hardware implementation effort is split between the design and verification teams, where the design team leaves all the testing to the verification. I think that this is a bad dichotomy and tend to agree with the <a class="reference external" href="https://en.wikipedia.org/wiki/Test-driven_development">TDD</a> (Test-Driven Development) philosophy which points-out the importance of the development tests. These are the tests written by the designers continuously during the development, which test each of the functional requirements of the design.</p>
<p data-verbosity="2" hidden="true">According to the TDD, the implementation of each functional requirement should be performed in three steps: red, green and refactor:</p>
<ol class="arabic simple" data-verbosity="2" hidden="true">
<li><p>Red: Add tests to verify the functional requirement. Run the tests to check that they fail, which they have to ought to do since the functionality hasn’t been implemented yet.</p></li>
<li><p>Green: Work on the functionality implementation until all the tests pass (new ones as well as the ones testing previously implemented requirements).</p></li>
<li><p>Refactor: Clean-up the code without breaking the tests</p></li>
</ol>
<p>For the RISC-V implementation, I plan on treating each instruction in the ISA as a separate functional requirement, so I should have a following flow:</p>
<ol class="arabic simple">
<li><p>Write a test that feeds the instruction to the processor and checks the memory and register state after the execution against the <a class="reference external" href="https://github.com/riscv/riscv-isa-sim/">Spike</a> RISC-V ISA simulator, which will serve as a reference model.</p></li>
<li><p>Implement the instruction in hardware and verify that the test passes together with all the test for previously implemented instructions</p></li>
<li><p>Refactor the processor implementation.</p></li>
</ol>
<p>Besides functional correctness, one additional important processor design quality parameter is its throughput. So, in addition to the functional tests for each of the instructions, I plan to use Vivado to test attainable frequency for my design.</p>
<p data-verbosity="2" hidden="true">Even though I’m aware of the already proposed architectures for the RISC-V processor (like the one in the <a class="reference external" href="https://www.amazon.com/Computer-Architecture-Quantitative-Approach-Kaufmann/dp/0128119055">Computer Architecture: A Quantitative Approach</a>), I will try to blank out the memory of them, and let the new one, guided by the PyGears principles, arise on its own.</p>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  Next: 
  <a href="setup.html">
    RISC-V Tools Setup
    
  </a>
  </span>
  
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'pygears';
        var disqus_identifier = '/riscv/introduction/';
        var disqus_title = 'RISC-V Blog Series Introduction';
        var disqus_url = 'https://bogdanvuk.github.io/pygears/riscv/introduction';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">PyGears</a></h1>



<p class="blurb">PyGears blog</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=bogdanvuk&repo=pygears&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a href="https://travis-ci.org/bogdanvuk/pygears">
    <img
        alt="https://secure.travis-ci.org/bogdanvuk/pygears.svg?branch=master"
        src="https://secure.travis-ci.org/bogdanvuk/pygears.svg?branch=master"
    />
</a>
</p>



  
  
  <h2>
  
  
    20 September 2018
  
  </h2>

  <ul>
    

  
  <li id="author"><span>Author:</span>
    
      
      <a href="../blog/author/bogdan-vukobratovic.html">Bogdan Vukobratović</a>
      
    </li>
  

  

  
  <li id="language"><span>Language:</span>
    
      
      <a href="../blog/language/english.html">English</a>
      
    </li>
  

  
  <li id="category"><span>Category:</span>
    
      
      <a href="../blog/category/risc-v.html">RISC-V</a>
      
    </li>
  

  
  
  <li id="comments">
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pygears'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    
    <a href="#disqus_thread" data-disqus-identifier="/riscv/introduction/"> Comments</a>
  </li>
  
  </ul>



  <h3><a href="../blog.html">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="setup.html">20 September - RISC-V Tools Setup</a></li>
    
  </ul>

  <h3><a href="../blog/tag.html">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../blog/tag/setup.html">setup</a></li>
      
    
  </ul>

  <h3><a href="../blog/category.html">Categories</a></h3>
  <ul>
  
    
    <li><a href="../blog/category/risc-v.html">RISC-V (2)</a></li>
    
  
    
  
  </ul>

  <h3><a href="../blog/archive.html">Archives</a></h3>
  <ul>
  
    
    <li><a href="../blog/2018.html">2018 (2)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Bogdan Vukobratović.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/riscv/introduction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>