{%- import 'snippet.j2' as snippet -%}
{% set vexpr = import_('pygears.hdl.sv.v.v_expression') %}

{% call snippet.gear_module(module_name, intfs, comment) %}

{% set slices = vexpr.sieve_slices(_din_t, params["key"]) %}
{% set concat = snippet.concat(slices|reverse|format_list("din_data[%s]")) %}

{% if slices %}
   assign dout_data = {{concat}};
{% endif %}

   assign dout_valid = din_valid;
   assign din_ready  = dout_ready;
{% endcall %}
